- se pedido liberado, enviar email para o comprador
O código do comprador está na pedido_sup.cod_comprador
Na tabela comprador tem o código do usuário

Boa tarde Ivo, 

Segue abaixo regra de envio de e-mail para cada uma dos 4 tipos de aprovações, 
hoje preciso deixar operacional pelo menos o de Compras, os demais faremos na sequencia. 
Segue regra para cada tipo de aprovação:

1-	Compras.
    a.	Quando da liberação do pedido envia-se o email para o primeiro aprovante, 
        assim que este aprovar envia-se email para o seguinte até a última aprovação, 
        na última aprovação envia-se email para o Comprador.
2-	Financeiro.
    Quando da geração do título (AD_MESTRE) envia-se o email para o primeiro aprovante, 
    assim que este aprovar envia-se email para o seguinte até a última aprovação, 
    na última aprovação não envia-se email para ninguém.
3-	Nota Fiscal.
    Quando da entrada da nota fiscal envia-se o email para o primeiro aprovante, 
    assim que este aprovar envia-se email para o seguinte até a última aprovação, 
    na última aprovação não envia-se email para ninguém.
4-	Contrato.
    Quando da entrada da nota fiscal referente a contrato envia-se o email para o 
    primeiro aprovante, assim que este aprovar envia-se email para o seguinte até a 
    última aprovação, na última aprovação não envia-se email para ninguém.

Atenciosamente,


O Josioni mandou um email com o comando javaenvia
[15:34:59] manuel pier sobrido: Desta forma, para validar primeiramente 
se o envio esta ocorrendo com sucesso, solicitamos que realize o seguinte comando:

java Envia $SMTP_SERVER [e-mail remetente] [e-mail destinatario] teste teste.txt 2
(A referência smtp_server no Linux é $smtp_server e no windows é %smtp_server%.)
[15:35:36] manuel pier sobrido: Vou pedir para a Sandra fazer um debug com o 
programa da Totvs para vermos como funciona o comando
[15:36:52] manuel pier sobrido: O Marcos me disse que tem que gravar o 
texto do email como se fosse um relatório no diretório LST.
[15:37:49] manuel pier sobrido: Depois dar o comando Java envia 
passando o arquivo gravado no LST

procure o log5600
[15:44:22] manuel pier sobrido: LOG5600 – log5600_envia_email_anexo()
[15:44:32] manuel pier sobrido: Procure essa função no documento

Não dá para ver a chamada do log5600 mas dá para ver o programa 
pesquisando o caminho do relatório onde gravou a msg
[16:15:24] manuel pier sobrido: E pegando o email da Sandra

SELECT NOM_CAMINHO FROM LOG_USU_DIR_RELAT WHERE LOG_USU_DIR_RELAT.USUARIO=? AND LOG_USU_DIR_RELAT.EMPRESA=? AND LOG_USU_DIR_RELAT.SISTEMA_FONTE='LST' AND LOG_USU_DIR_RELAT.AMBIENTE=?

CALL log5600_envia_email_anexo("ivohb.me@gmail.com", "ivohbarbosa@gmail.com", "assunto", p_caminho,  2, "")


- criar cadastro de usuario substituto
- quando o docum for pedido de compra, permitir cancelar
- quando o docum for financeiro, permitir suspender o pagamento.

